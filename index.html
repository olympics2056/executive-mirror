<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CORe IdentitY — Who I am When I Feel Unable</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#f6f8fb; --ink:#0f172a; --muted:#475569; --line:#e2e8f0; --accent:#2563eb;
      --card:#ffffff; --cardA:#ffffff; --cardB:#fbfdff; --cardC:#fffdf8; --cardD:#f9fffb;
      --chip:#f1f5f9; --chip-border:#e5e7eb; --ok:#16a34a; --warn:#eab308;
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.55}
    header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--line);z-index:50}
    .wrap{max-width:1100px;margin:0 auto;padding:14px 20px}
    h1{margin:0;font-size:20px;display:flex;align-items:center;gap:10px}
    .logo{width:24px;height:24px}
    .grid{display:grid;gap:16px}
    .grid-2{grid-template-columns:1fr}
    @media(min-width:980px){.grid-2{grid-template-columns:1fr 1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
    .card.a{background:var(--cardA)} .card.b{background:var(--cardB)}
    .card.c{background:var(--cardC)} .card.d{background:var(--cardD)}
    .muted{color:var(--muted)}
    .row{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .label{font-size:14px;font-weight:600}
    .subtle{font-size:12px;color:var(--muted)}
    input[type=range]{width:100%}
    textarea{width:100%;min-height:120px;border:1px solid var(--line);border-radius:12px;padding:10px;font:inherit;background:#fff}
    .btn{border:1px solid var(--line);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .btn:hover:not([disabled]){background:#f8fafc}
    .btn.primary{border-color:var(--accent);color:#fff;background:var(--accent)}
    .btn.primary:hover{filter:brightness(0.95)}
    .btn.ghost{border-color:var(--line);background:#fff}
    .btnbar{display:flex;gap:10px;flex-wrap:wrap}
    .section-title{font-weight:800;margin:6px 0 6px;font-size:16px}
    .title{font-size:20px;font-weight:800;margin:0 0 6px}
    .divider{height:1px;background:var(--line);margin:10px 0 16px}
    .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{font-size:12px;border:1px solid var(--chip-border);padding:4px 8px;border-radius:999px;background:var(--chip)}
    .list{margin:8px 0 0 18px}
    .list li{margin:5px 0}
    .kpi{display:flex;gap:10px;flex-wrap:wrap}
    .kpi .pill{background:#fff;border:1px solid var(--chip-border);padding:6px 10px;border-radius:10px;font-size:12px}
    .progress{font-size:12px;color:var(--muted)}
    .energy{display:inline-block;font-weight:800;font-size:18px;padding:6px 10px;border-radius:12px;border:1px solid #d1fae5;background:#ecfdf5;color:#065f46}
    .boundary{display:inline-block;font-weight:700;font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid #fde68a;background:#fffbeb;color:#7c2d12}
    .noprint{display:block}
    @media print{
      header,.noprint{display:none}
      body{background:#fff}
      .wrap{padding:0}
      .card{border:none;border-radius:0;padding:0}
      .divider{margin:8px 0}
    }
  </style>
</head>
<body>
<header>
  <div class="wrap row">
    <div>
      <h1>
        <!-- Inline SVG logo -->
        <svg class="logo" viewBox="0 0 24 24" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop stop-color="#2563eb"/><stop offset="1" stop-color="#10b981"/></linearGradient></defs>
          <circle cx="12" cy="12" r="10" fill="url(#g)"></circle>
          <path d="M7 13l3 3 7-7" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        CORe IdentitY — Who I am When I Feel Unable
      </h1>
      <div class="progress" id="progressText">16 questions • tip: adjust from the default 3 to reflect you</div>
    </div>
    <div class="btnbar noprint">
      <button class="btn" onclick="window.print()">Print / Save PDF</button>
      <button class="btn ghost" onclick="location.reload()">Reset</button>
    </div>
  </div>
</header>

<main class="wrap grid" style="margin-top:16px">
  <!-- Intro -->
  <section class="card a">
    <div class="title">What this does</div>
    <p class="muted">
      Translate what you feel “unable/stuck” with across <b>life, family, work, relationships</b> into a practical identity snapshot:
      <b>Big Five</b>, <b>MBTI tilt</b>, <b>Enneagram drive hint</b>, and <b>Career Branding tags</b> — plus strengths, risks, and growth actions.
    </p>
    <div class="kpi">
      <!-- Badges are informational (not buttons) -->
      <div class="pill">Single-page</div>
      <div class="pill">No login</div>
      <div class="pill">Printable PDF</div>
      <div class="pill">Copy / Download results</div>
      <div class="pill">Shareable link</div>
    </div>
  </section>

  <!-- Questions -->
  <section class="grid grid-2">
    <!-- Core (1–6) -->
    <div class="card b">
      <div class="section-title">A) Core Life/Work/Relationship (1–5)</div>
      <div class="subtle" style="margin:-2px 0 8px">1 = strongly disagree, 5 = strongly agree</div>

      <div class="label">1) In tough moments, I naturally take charge and set direction. (Work/Life)</div>
      <div class="row"><input id="q1" type="range" min="1" max="5" value="3" oninput="sv(this,'v1')"><span id="v1">3</span></div>

      <div class="label">2) I build systems (habits, dashboards) rather than improvise. (Work/Family)</div>
      <div class="row"><input id="q2" type="range" min="1" max="5" value="3" oninput="sv(this,'v2')"><span id="v2">3</span></div>

      <div class="label">3) I proactively check how people feel instead of assuming. (Relationships)</div>
      <div class="row"><input id="q3" type="range" min="1" max="5" value="3" oninput="sv(this,'v3')"><span id="v3">3</span></div>

      <div class="label">4) I over-commit to help others even when it costs me. (Boundaries)</div>
      <div class="row"><input id="q4" type="range" min="1" max="5" value="3" oninput="sv(this,'v4')"><span id="v4">3</span></div>

      <div class="label">5) I prefer deep solo work over constant meetings. (Energy style)</div>
      <div class="row"><input id="q5" type="range" min="1" max="5" value="3" oninput="sv(this,'v5')"><span id="v5">3</span></div>

      <div class="label">6) I share wins and ask for credit when appropriate. (Self-advocacy)</div>
      <div class="row"><input id="q6" type="range" min="1" max="5" value="3" oninput="sv(this,'v6')"><span id="v6">3</span></div>
    </div>

    <!-- Personality + Career Branding (7–16) -->
    <div class="card c">
      <div class="section-title">B) Personality + Career Branding (1–5)</div>
      <div class="subtle" style="margin:-2px 0 8px">Maps to Big Five / MBTI tilt / Enneagram hint & career identity</div>

      <div class="divider"></div>
      <div class="subtle">Personality</div>

      <div class="label">7) Openness — I seek new ideas/experiences that challenge my comfort zone.</div>
      <div class="row"><input id="q7" type="range" min="1" max="5" value="3" oninput="sv(this,'v7')"><span id="v7">3</span></div>

      <div class="label">8) Conscientiousness — I set goals and follow through systematically.</div>
      <div class="row"><input id="q8" type="range" min="1" max="5" value="3" oninput="sv(this,'v8')"><span id="v8">3</span></div>

      <div class="label">9) Extraversion — I gain energy from people/group activities.</div>
      <div class="row"><input id="q9" type="range" min="1" max="5" value="3" oninput="sv(this,'v9')"><span id="v9">3</span></div>

      <div class="label">10) Agreeableness — I prioritize harmony and others’ needs.</div>
      <div class="row"><input id="q10" type="range" min="1" max="5" value="3" oninput="sv(this,'v10')"><span id="v10">3</span></div>

      <div class="label">11) Emotional Stability — I stay calm and resilient under pressure.</div>
      <div class="row"><input id="q11" type="range" min="1" max="5" value="3" oninput="sv(this,'v11')"><span id="v11">3</span></div>

      <div class="label">12) Achievement Drive — Recognition/results motivate me strongly.</div>
      <div class="row"><input id="q12" type="range" min="1" max="5" value="3" oninput="sv(this,'v12')"><span id="v12">3</span></div>

      <div class="divider"></div>
      <div class="subtle">Career Branding</div>

      <div class="label">13) Adaptability — I can pivot without losing focus.</div>
      <div class="row"><input id="q13" type="range" min="1" max="5" value="3" oninput="sv(this,'v13')"><span id="v13">3</span></div>

      <div class="label">14) Mentoring — I elevate others while advancing goals.</div>
      <div class="row"><input id="q14" type="range" min="1" max="5" value="3" oninput="sv(this,'v14')"><span id="v14">3</span></div>

      <div class="label">15) Translation — I turn technical detail into leader-ready strategy.</div>
      <div class="row"><input id="q15" type="range" min="1" max="5" value="3" oninput="sv(this,'v15')"><span id="v15">3</span></div>

      <div class="label">16) Risk Spotting — I detect project risks early.</div>
      <div class="row"><input id="q16" type="range" min="1" max="5" value="3" oninput="sv(this,'v16')"><span id="v16">3</span></div>
    </div>
  </section>

  <!-- Notes + Actions -->
  <section class="grid grid-2 noprint">
    <div class="card d">
      <div class="section-title">Your Notes (context)</div>
      <div class="subtle" style="margin:-2px 0 8px">Add role, industry, family/relationship context, challenges, and goals.</div>
      <textarea id="notes" placeholder="Type your context here..."></textarea>
    </div>
    <div class="card a" style="display:flex;align-items:end;justify-content:flex-end">
      <div class="btnbar">
        <button id="btnGenerate" class="btn primary" onclick="generateReport()">Generate Report</button>
        <button id="btnCopy" class="btn" onclick="copySummary()" disabled>Copy Summary</button>
        <button id="btnJson" class="btn" onclick="downloadJSON()" disabled>Download JSON</button>
        <button id="btnShare" class="btn" onclick="shareReport()" disabled>Share Report</button>
        <button class="btn ghost" onclick="location.reload()">Reset</button>
      </div>
    </div>
  </section>

  <!-- Report -->
  <section class="card a" id="report" style="display:none">
    <div class="title">Your CORe Identity Report</div>
    <p id="summary" class="sub"></p>

    <div class="tags" id="tags"></div>

    <div class="divider"></div>
    <div class="grid grid-2">
      <div>
        <div class="section-title">Strengths</div>
        <ul id="strengths" class="list"></ul>
      </div>
      <div>
        <div class="section-title">Risks / Watchouts</div>
        <ul id="risks" class="list"></ul>
      </div>
    </div>

    <div style="margin-top:12px">
      <div class="section-title">Growth Actions</div>
      <ul id="growth" class="list"></ul>
    </div>

    <div id="userNotesBox" style="margin-top:12px;display:none">
      <div class="section-title">Your Notes</div>
      <p id="userNotes" class="sub"></p>
    </div>

    <div class="divider"></div>
    <div class="kpi" style="gap:14px;align-items:center">
      <span id="kpiEnergy" class="energy" style="display:none"></span>
      <span id="kpiBoundary" class="boundary" style="display:none"></span>
    </div>

    <div class="divider"></div>
    <div class="section-title">MBTI Tilt — What your letters mean</div>
    <p id="mbtiExplain" class="sub"></p>

    <details style="margin-top:10px">
      <summary>Raw & Derived Scores</summary>
      <pre id="raw" class="muted"></pre>
    </details>
  </section>
</main>

<script>
  // helpers
  const gv = id => Number(document.getElementById(id).value);
  const gt = id => document.getElementById(id).value.trim();
  const tag = t => { const s=document.createElement('span'); s.className='tag'; s.textContent=t; return s; };
  const li  = t => { const l=document.createElement('li');  l.textContent=t;   return l; };
  function sv(input,id){ document.getElementById(id).textContent = input.value; updateProgress(); }

  function updateProgress(){
    document.getElementById('progressText').textContent = '16 questions • tip: adjust from the default 3 to reflect you';
  }

  function enableResultButtons(enable){
    document.getElementById('btnCopy').disabled = !enable;
    document.getElementById('btnJson').disabled = !enable;
    document.getElementById('btnShare').disabled = !enable;
  }

  function collectAll(){
    return [
      gv('q1'),gv('q2'),gv('q3'),gv('q4'),gv('q5'),gv('q6'),
      gv('q7'),gv('q8'),gv('q9'),gv('q10'),gv('q11'),gv('q12'),
      gv('q13'),gv('q14'),gv('q15'),gv('q16')
    ];
  }

  function generateReport(fromShare=false){
    const [leadership,systems,attune,boundary,deepWork,advocacy,
           openness,consc,extrav,agree,emoStable,achieve,
           adapt,mentor,translate,riskSpot] = collectAll();
    const notes = gt('notes');

    // Big Five
    const bigFive = {
      Openness: openness,
      Conscientiousness: consc,
      Extraversion: extrav,
      Agreeableness: agree,
      Neuroticism: Math.max(1, Math.min(5, 6 - emoStable))
    };

    // MBTI-ish
    const EI = (extrav + (6 - deepWork)) / 2; // deepWork high => I; invert to get E signal
    const JP = (systems + riskSpot - adapt + 5) / 3; // more systems/riskSpot => J; more adapt => P
    const TF = (systems + translate) / 2 - (attune + agree) / 2 + 3;

    const EI_tag = EI >= 3 ? 'E-leaning' : 'I-leaning';
    const JP_tag = JP >= 3 ? 'J-leaning' : 'P-leaning';
    const TF_tag = TF >= 3 ? 'T-leaning' : 'F-leaning';

    // Enneagram hint
    const drive3 = achieve;
    const drive9 = agree;
    const drive5 = (deepWork + openness)/2;
    const enneagramHint = (() => {
      const map = [{k:'Achiever (3)',v:drive3},{k:'Peacemaker (9)',v:drive9},{k:'Investigator (5)',v:drive5}];
      map.sort((a,b)=>b.v-a.v);
      return map[0].k + '-tilt';
    })();

    // Career tags
    const tagsCareer = [];
    if (translate >= 4) tagsCareer.push('Strategy Translator');
    if (riskSpot  >= 4) tagsCareer.push('Risk Spotter');
    if (mentor    >= 4) tagsCareer.push('Strategic Mentor');
    if (adapt     >= 4) tagsCareer.push('Adaptive Operator');

    // Summary
    const leaderTag = leadership >= 4 ? 'Natural Driver' : (leadership <= 2 ? 'Selective Leader' : 'Situational Leader');
    const boundaryTag = boundary >= 4 ? 'Watch Boundaries' : 'Healthy Boundaries';
    const energyPref = deepWork >= 3 ? 'deep solo focus' : 'collaborative energy';

    const summary = `You present as a ${leaderTag} with ${EI_tag}/${TF_tag}/${JP_tag} tendencies. `
      + `Big Five profile O:${openness}/5, C:${consc}/5, E:${extrav}/5, A:${agree}/5, N:${bigFive.Neuroticism}/5 `
      + `and an ${enneagramHint}. You prefer ${energyPref} and value `
      + `${systems>=3?'structure':'flexibility'}. ${attune>=3?'You check emotions directly;':'Add earlier emotional check-ins;'} `
      + `${boundaryTag === 'Watch Boundaries' ? 'tighten edges around time/energy.' : 'maintain clear edges around time/energy.'}`;

    // Strengths / Risks / Growth
    const strengths=[], risks=[], growth=[];
    if (leadership >= 4) strengths.push('direction-setting under ambiguity');
    if (systems   >= 4) strengths.push('systems thinking & planning');
    if (translate >= 4) strengths.push('translating technical detail into strategy');
    if (riskSpot  >= 4) strengths.push('early risk detection and mitigation');
    if (mentor    >= 4) strengths.push('mentoring and uplifting others');
    if (openness  >= 4) strengths.push('curiosity and idea-generation');
    if (consc     >= 4) strengths.push('disciplined execution and follow-through');
    if (emoStable >= 4) strengths.push('calm under pressure');

    if (boundary  >= 4) risks.push('over-committing; kindness read as unlimited availability');
    if (attune    <= 2) risks.push('missing subtle emotional signals in close relationships');
    if (advocacy  <= 2) risks.push('under-crediting your contributions and wins');
    if (agree     >= 4 && boundary >= 3) risks.push('people-pleasing; difficulty saying no');
    if (consc     <= 2 && adapt >= 4) risks.push('shifting priorities without enough structure');
    if (bigFive.Neuroticism >= 4) risks.push('stress reactivity; energy drain in conflicts');

    if (boundary  >= 4) growth.push('Define non-negotiables early; say yes with scope and credit.');
    if (attune    <= 2) growth.push('Schedule brief check-ins; look for tone/behavior changes.');
    if (advocacy  <= 2) growth.push('Share monthly impact notes; ask for attribution explicitly.');
    if (agree     >= 4 && boundary >= 3) growth.push('Use a “warm no”: appreciate, give rationale, propose an alternative.');
    if (consc     <= 2) growth.push('Adopt a weekly plan: top 3 outcomes, 2 guardrails, 1 risk review.');
    if (bigFive.Neuroticism >= 4) growth.push('Name the stressor + one next action; practice 2-minute resets.');

    if (!strengths.length) strengths.push('balanced capability across domains');
    if (!risks.length)     risks.push('no acute risks detected; maintain feedback loops');
    if (!growth.length)    growth.push('Maintain “kindness with edges”: warmth + clear boundaries.');

    // render
    document.getElementById('report').style.display = 'block';
    document.getElementById('summary').textContent = summary;

    const tagsBox = document.getElementById('tags');
    tagsBox.innerHTML = '';
    [leaderTag, boundaryTag, EI_tag, TF_tag, JP_tag, enneagramHint, ...tagsCareer].forEach(t => tagsBox.appendChild(tag(t)));

    const sBox = document.getElementById('strengths'); sBox.innerHTML=''; strengths.forEach(t=>sBox.appendChild(li(t)));
    const rBox = document.getElementById('risks');     rBox.innerHTML=''; risks.forEach(t=>rBox.appendChild(li(t)));
    const gBox = document.getElementById('growth');    gBox.innerHTML=''; growth.forEach(t=>gBox.appendChild(li(t)));

    const notesBox = document.getElementById('userNotesBox');
    const notesOut = document.getElementById('userNotes');
    if (notes){ notesBox.style.display='block'; notesOut.textContent = notes; } else { notesBox.style.display='none'; }

    // badges
    const kpiEnergy = document.getElementById('kpiEnergy');
    const kpiBoundary = document.getElementById('kpiBoundary');
    kpiEnergy.style.display = 'inline-block';
    kpiEnergy.textContent = deepWork >= 3 ? 'Energy: Deep Focus' : 'Energy: Collaborative';
    kpiBoundary.style.display = boundary >= 4 ? 'inline-block' : 'none';
    kpiBoundary.textContent = 'Boundary Risk';

    // MBTI explanation
    const mbti = (EI_tag.startsWith('E')?'E':'I') + (TF_tag.startsWith('T')?'T':'F') + (JP_tag.startsWith('J')?'J':'P');
    const explain = {
      'E':'Extraversion (energized by people & action)', 'I':'Introversion (energized by depth & reflection)',
      'T':'Thinking (logic & systems emphasis)', 'F':'Feeling (values & people emphasis)',
      'J':'Judging (structure & closure)', 'P':'Perceiving (flexibility & openness)'
    };
    const mbtiText = `Tilt: ${mbti}. ${explain[mbti[0]]}; ${explain[mbti[1]]}; ${explain[mbti[2]]}.`;
    document.getElementById('mbtiExplain').textContent = mbtiText;

    // raw dump (including share payload)
    const raw = {
      core:{leadership,systems,attune,boundary,deepWork,advocacy},
      personality:{openness,consc,extrav,agree,emoStable,achieve},
      career:{adapt,mentor,translate,riskSpot},
      bigFive, MBTI:{EI:EI_tag, TF:TF_tag, JP:JP_tag, tilt:mbti}, enneagramHint, notes
    };
    document.getElementById('raw').textContent = JSON.stringify(raw, null, 2);

    // enable post-actions
    enableResultButtons(true);

    // if this was loaded from a shared URL, avoid duplicating pushState
    if (!fromShare) history.replaceState(null, '', makeShareURL(raw));
    window.scrollTo({top: document.getElementById('report').offsetTop - 12, behavior:'smooth'});
  }

  async function copySummary(){
    const report = document.getElementById('summary').textContent.trim();
    if (!report){ alert('Generate the report first.'); return; }
    try { await navigator.clipboard.writeText(report); alert('Summary copied to clipboard.'); }
    catch { alert('Copy failed. Select and copy manually.'); }
  }

  function downloadJSON(){
    const raw = document.getElementById('raw').textContent.trim();
    if (!raw){ alert('Generate the report first.'); return; }
    const blob = new Blob([raw], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'core-identity-report.json';
    document.body.appendChild(a); a.click();
    URL.revokeObjectURL(url); a.remove();
  }

  function makeShareURL(raw){
    // compact scores as s=comma-separated; include notes as n=
    const s = collectAll().join(',');
    const params = new URLSearchParams();
    params.set('s', s);
    if (raw.notes) params.set('n', raw.notes);
    return location.pathname + '?' + params.toString();
  }

  function shareReport(){
    const rawText = document.getElementById('raw').textContent.trim();
    if (!rawText){ alert('Generate the report first.'); return; }
    const raw = JSON.parse(rawText);
    const shareURL = location.origin + makeShareURL(raw);
    // try Web Share API
    if (navigator.share){
      navigator.share({title:'CORe Identity Report', text:'My CORe Identity snapshot', url:shareURL})
        .catch(()=>{ navigator.clipboard?.writeText(shareURL); alert('Link copied to clipboard.'); });
    } else {
      navigator.clipboard?.writeText(shareURL);
      alert('Share link copied to clipboard:\n' + shareURL);
    }
  }

  // Parse shared URL on load
  (function hydrateFromURL(){
    const q = new URLSearchParams(location.search);
    const s = q.get('s');
    if (!s) return;
    const parts = s.split(',').map(Number);
    if (parts.length !== 16) return;
    // set sliders
    for (let i=1;i<=16;i++){
      const el = document.getElementById('q'+i);
      if (el){ el.value = parts[i-1]; const v = document.getElementById('v'+i); if (v) v.textContent = parts[i-1]; }
    }
    const n = q.get('n');
    if (n) document.getElementById('notes').value = n;
    // auto-generate report
    generateReport(true);
  })();
</script>
</body>
</html>
